name: Test Workflow
on:
  workflow_dispatch:
    inputs:
      event_name:
        description: "Event name(s) - comma-separated for multiple. Example: Italian Grand Prix or Italian Grand Prix,Monaco Grand Prix. Leave empty for all events."
        required: false
        type: string
        default: ""
      session_type:
        description: "Session type(s) - comma-separated for multiple. Example: R or R,Q,S. Leave empty for all sessions."
        required: false
        type: string
        default: ""
jobs:
  unit-tests:
    name: Unit Tests
    runs-on: ubuntu-latest
    timeout-minutes: 120 # 2 hours max
    steps:
      - name: Job configuration
        run: |
          # Python command
          CMD="command --year 2024"

          # Store inputs in variables with proper quoting
          EVENT_INPUT='${{ inputs.event_name }}'
          SESSION_INPUT='${{ inputs.session_type }}'
          # Add event names if provided
          if [ -n "$EVENT_INPUT" ]; then
            # Use IFS (Internal Field Separator) to split by comma
            IFS=',' read -ra EVENTS <<< "$EVENT_INPUT"
            for event in "${EVENTS[@]}"; do
              # Trim whitespace
              event=$(echo "$event" | xargs)
              echo "--event \"$event\""
              CMD="$CMD --event \"$event\""
            done
          fi
          # Add session types if provided
          if [ -n "$SESSION_INPUT" ]; then
            # Replace commas with spaces
            SESSIONS=$(echo "$SESSION_INPUT" | tr ',' ' ')
            echo "--session $SESSIONS"
            CMD="$CMD --session $SESSIONS"
          fi

          echo "Executing: $CMD"
