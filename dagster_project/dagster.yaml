# # Dagster instance configuration
# Storage configuration - PostgreSQL for run storage, event logs, and schedules
storage:
  postgres:
    postgres_db:
      username:
        env: DAGSTER_POSTGRES_USER
      password:
        env: DAGSTER_POSTGRES_PASSWORD
      hostname:
        env: DAGSTER_POSTGRES_HOST
      db_name:
        env: DAGSTER_POSTGRES_DB
      port:
        env: DAGSTER_POSTGRES_PORT

# Run launcher - determines how runs are executed
run_launcher:
  module: dagster._core.launcher
  class: DefaultRunLauncher

# Run coordinator - manages run queuing and concurrency
run_coordinator:
  module: dagster._core.run_coordinator
  class: DefaultRunCoordinator

# Compute logs - where to store stdout/stderr from runs
compute_logs:
  module: dagster._core.storage.local_compute_log_manager
  class: LocalComputeLogManager
  config:
    base_dir: /tmp/dagster/logs

# Run monitoring - optional, monitors run worker health
run_monitoring:
  enabled: true
  start_timeout_seconds: 180
  max_resume_run_attempts: 0

# Telemetry - set to false to disable telemetry
telemetry:
  enabled: false

# Code server configuration
code_servers:
  local_startup_timeout: 180
  reload_timeout: 60

# Data retention policies
retention:
  schedule:
    purge_after_days:
      skipped: 7
      failure: 30
      success: 7
  sensor:
    purge_after_days:
      skipped: 7
      failure: 30
      success: 7
  auto_materialize:
    purge_after_days:
      skipped: 7
      failure: 30
      success: 7

# Sensor configuration
sensors:
  use_threads: true
  num_workers: 4

# Schedule configuration
schedules:
  use_threads: true
  num_workers: 4
